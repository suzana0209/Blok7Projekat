<label *ngIf="NonActiveAdmin()">You are not authorized for add/edit/delete lines! Your request is processed!  You can only see the departures for the selected day!</label>
<label *ngIf="DeniedAdmin()">You are not authorized for add/edit/delete lines! Your request is denied! You can only see the departures for the selected day</label>


<div *ngIf = "LoggedAdmin()">    
    <div align="center">
        <button type="submit" class="button" class="btn" (click)='showTimeT()'>Show timetable</button>
      <button type="submit" class="button" class="btn" (click)='showAdd()' >Add timetable</button> 
      <button type="submit" class="button" class="btn" (click)='showEdit()' >Edit timetable</button>  
      <button type="submit" class="button" class="btn" (click)='showDelete()'>Delete timetable</button>  
    </div>
  
    <div *ngIf="isSelectedAdd()">  
      <form #timetableForm="ngForm" (ngSubmit)="onSubmit(timetableForm.value, timetableForm)">
        <div class="form-group" >
          <label for="DayId">Day type</label>
          <select name="DayId" class="form-group"  class="form-control" ngModel>
            <option disabled>Please select...</option>
            <option value="Workday">Workday</option>
            <option value="Saturday">Saturday</option>
            <option value="Sunday">Sunday</option>
          </select>
          <div *ngIf="!validationsForAdd.dayIdOk" style="color:red">Please select day type.</div>
        
        </div>
  
        <label for="LineId">Select line: </label>
        <select name="LineId"  class="form-control" ngModel>
        <option disabled>Please select...</option>
        <option *ngFor="let line of allLinesFromDb" value={{line.RegularNumber}}>{{line.RegularNumber}}</option>
        </select>
        <div *ngIf="!validationsForAdd.lineIdOk" style="color:red">Please select line number.</div>
        
        
        <br><label for="Departures" >Select time</label>
        <input type="time" name="Departures" class="form-control" ngModel>    
        <div *ngIf="!validationsForAdd.departuresOk" style="color:red">Departure can't be empty!</div> <br><br>
        
  
        <button type="submit" class="nav-link" class="btn btn-primary">Add timetable</button>
  
      </form> 
    </div>
  
    <div *ngIf="isSelectedDelete()">
      <form #timetableForm="ngForm" (ngSubmit)="onSubmitDelete(timetableForm.value, timetableForm)">
        <div class="form-group" >
          <label for="DayId">Day type</label>
          <select name="DayId" class="form-group"  class="form-control" (click)="getLineForEdit($event)" ngModel>
            <option disabled>Please select...</option>
            <option value="Workday">Workday</option>
            <option value="Saturday">Saturday</option>
            <option value="Sunday">Sunday</option>
          </select>
          <!--validationsForDelete-->
          <div *ngIf="!validationsForDelete.dayIdOk" style="color:red">Please select day type!</div> <br><br>
        
        </div>
  
        <label for="LineId">Select line: </label>
        <select name="LineId"  class="form-control"  ngModel>
          <option disabled>Please select...</option>
          <option *ngFor="let line of allLineForSelDay" value={{line}}>{{line}}</option>
        </select>
        <div *ngIf="!validationsForDelete.lineIdOk" style="color:red">Please select line number!</div> <br><br>
        

        <button type="submit" class="nav-link" class="btn btn-primary">Delete timetable</button>
  
      </form>
    </div>
  
    <div *ngIf="isSelectedEdit()">
        <form #timetableForm="ngForm" (ngSubmit)="onSubmitEdit(timetableForm.value, timetableForm)">
            <div class="form-group">
              <label for="DayId">Select day type</label>
          <select name="DayId" class="form-group"  class="form-control" (click)="getLineForEdit($event)" ngModel>
            <option disabled>Please select...</option>
            <option value="Workday">Workday</option>
            <option value="Saturday">Saturday</option>
            <option value="Sunday">Sunday</option>
          </select>
          <div *ngIf="!validationsForEdit.dayIdOk" style="color:red">Please select day type.</div>
        
            </div>
        
  
        <div *ngIf="showLineComboBox">
        <label for="LineId">Select line </label>
        <select name="LineId"  class="form-control" (click)="getDeparturesForEditt($event)" ngModel>
          <option disabled>Please select...</option>
          <option *ngFor="let line of allLineForSelDay" value={{line}}>{{line}}</option>
        </select>
        <div *ngIf="!validationsForEdit.lineIdOk" style="color:red">Please select line number.</div>
        
        </div>
  
        <br><br>
        <div *ngIf="showDepartureComboBox">
          <label for="Departures">Select departure </label>
          <select name="Departures"  class="form-control" (click) = "setNewDepartures($event)" ngModel>
            <option disabled>Please select...</option>
            <option *ngFor="let line of allDeparturesForSelect" value={{line}}>{{line}}</option>
          </select>
          <div *ngIf="!validationsForEdit.departuresOk" style="color:red">Please select departure.</div>
        
          <br><br>
          <!-- <label>{{messageDontDepartures}}</label> -->
          </div>

          
  
          <div *ngIf="boolForButton">
          <button *ngIf="hiddenDeleteButton" type="button" class="nav-link" class="btn btn-primary" (click)="editTime()">Edit time</button>
          <br><br>
          <button *ngIf = "hiddenEditButton" type="button" class="nav-link" class="btn btn-primary" (click)="deleteTime()">Delete time</button>
            </div>
  
        <div *ngIf="showInputTime">
          <br><label for="NewDepartures" >Select time</label>
          <input type="time" name="NewDepartures" value="{{departuresForEditInput}}" class="form-control" ngModel><br>
          <div *ngIf="!validationsForEdit.newDeparturesOk" style="color:red">New departure can't be empty.</div>
        
        </div>
  
  
        <br><br>
        <div *ngIf="editSubmitBool">
        <button type="submit" class="nav-link" class="btn btn-primary">Save changes for timetable</button>
        </div>
      </form>
    </div>
  </div>
  

  <!--Ovaj dio vide SVI cak i neautorizovani admini-->
  <div *ngIf="(!isSelectedAdd() && !isSelectedDelete() && !isSelectedEdit() && isSelectedShow()) || !LoggedAdmin()">  
    <label for="DayId">Day type</label>
    <select name="DayId" class="form-group"  class="form-control" (click)="getLineForEdit($event)">
      <option disabled>Please select</option>
      <option value="Workday">Workday</option>
      <option value="Saturday">Saturday</option>
      <option value="Sunday">Sunday</option>
    </select>
      <div *ngIf="!validations.dayTypeOk" style="color:red">Day type can't be empty.</div>
        
    
  
    <div *ngIf="showLineCbForUnlogedUser">
      <label for="LineId">Select line: </label>
      <select name="LineId"  class="form-control" (click)="getDeparturesForEditt($event)">
        <option disabled>Please select</option>
        <option *ngFor="let line of allLineForSelDay" value={{line}}>{{line}}</option>
      </select>
      <div *ngIf="!validations.selectedLineOk" style="color:red">Line  can't be empty.</div>
       
      </div>
  
      <br><br><br>

      
      <!--Prikazi polaske i za neregistrovanog korisnika i za ostale-->
      <button *ngIf = "showDepartureComboBox" type="button" class="nav-link" class="btn btn-primary" (click)="showDepartureOnClick()">Show departure time</button> <br><br>
           
      <div *ngIf="showDepForUnregisterUser">
        <!-- <label >Departures for {{selectedDayForEdit}} on Line: {{pom}}:</label> -->
        <label>{{allDeparturesForSelect.length != 0 ? 'Departures for ' + selectedDayForEdit + ' on Line: ' : 
          'No departures for ' + selectedDayForEdit +' on Line: '}} {{pom != "Please select" ? pom : ""}}  </label>
        <p *ngFor="let line of allDeparturesForSelect">{{line}}</p>
      </div>
      
  </div>